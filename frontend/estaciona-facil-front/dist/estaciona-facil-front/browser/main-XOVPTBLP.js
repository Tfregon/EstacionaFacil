import{a as j,b as z,c as S,d as U,e as v,f as P,g as E,h as R,i as I,j as N,k as D,l as A,m as G}from"./chunk-LXIWNHXD.js";import{Fa as h,Ha as o,Ia as r,Ja as F,Ka as L,La as C,Ma as M,Na as T,Oa as s,Pa as y,Ra as l,Sa as d,Ta as g,W as b,X as _,ib as x,kb as V,na as p,pb as B,qb as H,ra as u,rb as q,va as f,za as w}from"./chunk-BEARXXYF.js";var W=class n{title="estaciona-facil-front";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){t&1&&F(0,"router-outlet")},dependencies:[z],encapsulation:2})};function ee(n,i){if(n&1&&(o(0,"p",9),s(1),r()),n&2){let t=M();p(),y(t.errorMessage)}}var O=class n{constructor(i,t){this.authService=i;this.router=t}username="";password="";errorMessage="";login(){this.authService.login({username:this.username,password:this.password}).subscribe({next:i=>{localStorage.setItem("token",i.token),this.router.navigate(["/dashboard"])},error:i=>{this.errorMessage="Usu\xE1rio ou senha inv\xE1lidos",console.error(i)}})}static \u0275fac=function(t){return new(t||n)(u(G),u(S))};static \u0275cmp=f({type:n,selectors:[["app-login"]],decls:14,vars:4,consts:[["loginForm","ngForm"],[1,"login-container"],[3,"ngSubmit"],["for","username"],["type","text","id","username","name","username","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,e){if(t&1){let m=L();o(0,"div",1)(1,"h2"),s(2,"\u{1F510} Login"),r(),o(3,"form",2,0),C("ngSubmit",function(){return b(m),_(e.login())}),o(5,"label",3),s(6,"Usu\xE1rio"),r(),o(7,"input",4),g("ngModelChange",function(c){return b(m),d(e.username,c)||(e.username=c),_(c)}),r(),o(8,"label",5),s(9,"Senha"),r(),o(10,"input",6),g("ngModelChange",function(c){return b(m),d(e.password,c)||(e.password=c),_(c)}),r(),o(11,"button",7),s(12,"Entrar"),r(),w(13,ee,2,1,"p",8),r()()}if(t&2){let m=T(4);p(7),l("ngModel",e.username),p(3),l("ngModel",e.password),p(),h("disabled",m.invalid),p(2),h("ngIf",e.errorMessage)}},dependencies:[A,N,v,P,E,D,I,R,x],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#f3f6f9;font-family:Segoe UI,sans-serif}form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 0 20px #0000001a;width:100%;max-width:350px;display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#1976d2}label[_ngcontent-%COMP%]{margin-top:1rem;font-weight:500}input[_ngcontent-%COMP%]{padding:.5rem;margin-top:.3rem;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{margin-top:1.5rem;padding:.75rem;background-color:#1976d2;color:#fff;border:none;border-radius:5px;font-weight:700;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.error[_ngcontent-%COMP%]{color:red;margin-top:1rem;font-size:.9rem}"]})};var Q=(n,i)=>!0;function te(n,i){if(n&1&&(o(0,"div",10),s(1),r()),n&2){let t=M();p(),y(t.errorMessage)}}var k=class n{constructor(i,t){this.http=i;this.router=t}name="";username="";password="";confirmPassword="";errorMessage="";register(){if(this.password!==this.confirmPassword){this.errorMessage="As senhas n\xE3o coincidem.";return}let i={name:this.name,username:this.username,password:this.password};this.http.post("estacionafacilapi20250404165631.azurewebsites.net/api/Users/register",i).subscribe({next:()=>{alert("Funcion\xE1rio registrado com sucesso!"),this.router.navigate(["/dashboard"])},error:t=>{console.error("Erro ao registrar:",t),this.errorMessage="Erro ao registrar funcion\xE1rio."}})}voltarAoDashboard(){this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)(u(B),u(S))};static \u0275cmp=f({type:n,selectors:[["app-register"]],decls:22,vars:5,consts:[[1,"register-container"],[3,"ngSubmit"],["type","text","name","name","required","",3,"ngModelChange","ngModel"],["type","text","name","username","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","password","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"form-buttons"],["type","submit"],["type","button",3,"click"],[1,"error"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"h2"),s(2,"Registrar Novo Funcion\xE1rio"),r(),o(3,"form",1),C("ngSubmit",function(){return e.register()}),o(4,"label"),s(5,"Nome:"),r(),o(6,"input",2),g("ngModelChange",function(a){return d(e.name,a)||(e.name=a),a}),r(),o(7,"label"),s(8,"Username:"),r(),o(9,"input",3),g("ngModelChange",function(a){return d(e.username,a)||(e.username=a),a}),r(),o(10,"label"),s(11,"Senha:"),r(),o(12,"input",4),g("ngModelChange",function(a){return d(e.password,a)||(e.password=a),a}),r(),o(13,"label"),s(14,"Confirmar Senha:"),r(),o(15,"input",5),g("ngModelChange",function(a){return d(e.confirmPassword,a)||(e.confirmPassword=a),a}),r(),w(16,te,2,1,"div",6),o(17,"div",7)(18,"button",8),s(19,"Registrar"),r(),o(20,"button",9),C("click",function(){return e.voltarAoDashboard()}),s(21,"\u2B05 Voltar ao Dashboard"),r()()()()),t&2&&(p(6),l("ngModel",e.name),p(3),l("ngModel",e.username),p(3),l("ngModel",e.password),p(3),l("ngModel",e.confirmPassword),p(),h("ngIf",e.errorMessage))},dependencies:[V,x,A,N,v,P,E,D,I,R],styles:[".register-container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:20px;background-color:#f2f2f2;border-radius:12px;box-shadow:0 0 10px #0000001a;font-family:Arial,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;color:#3498db}label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:4px;border:1px solid #ccc;border-radius:6px;font-size:14px}button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:10px 15px;border-radius:6px;font-size:14px;cursor:pointer;transition:background-color .2s ease}button[_ngcontent-%COMP%]:hover{background-color:#3498db}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:10px;margin-top:20px}.error[_ngcontent-%COMP%]{color:red;margin-top:10px;font-size:13px}"]})};var X=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:O},{path:"register",component:k},{path:"history",loadComponent:()=>import("./chunk-B3QSCDWF.js").then(n=>n.HistoryComponent)},{path:"dashboard",canActivate:[Q],loadComponent:()=>import("./chunk-5VNAHJXV.js").then(n=>n.DashboardComponent)}];var Y=(n,i)=>{let t=localStorage.getItem("token");if(t){let e=n.clone({setHeaders:{Authorization:`Bearer ${t}`}});return i(e)}return i(n)};j(W,{providers:[U(X),H(q([Y]))]});
