<div class="dashboard-container">
  <h2>ğŸš— VeÃ­culos Ativos</h2>

  <!-- BotÃµes de aÃ§Ã£o -->
  <div class="controls">
    <button (click)="verCaixa()">ğŸ’° Ver Caixa</button>
    <button (click)="verHistorico()">ğŸ“œ Ver HistÃ³rico</button>
    <button (click)="atualizar()">ğŸ”„ Atualizar</button>
    <button (click)="abrirFormulario()">â• Adicionar VeÃ­culo</button>
    <button (click)="router.navigate(['/register'])">â• Registrar FuncionÃ¡rio</button>
  </div>
  <!-- ğŸ’° SeÃ§Ã£o de exibiÃ§Ã£o do caixa do dia -->
  <div class="caixa-container" *ngIf="mostrarCaixa">
    <h3>ğŸ’° Total do Caixa de Hoje:</h3>
    <p class="valor-caixa">R$ {{ cashToday?.toFixed(2) }}</p>
  </div>
  <div class="controls">
    <button (click)="carregarStatusSistema()">âš™ï¸ Ver Status</button>
    <button (click)="carregarVersaoSistema()">ğŸ“„ VersÃ£o</button>
  </div>
  <div *ngIf="mostrarStatus" class="status-box">
    <h3>Status do Sistema</h3>
    <p><strong>Hora do Servidor:</strong> {{ sistemaStatus?.serverTime | date:'short' }}</p>
    <p><strong>Backend:</strong> {{ sistemaStatus?.backend }}</p>
    <p><strong>Banco de Dados:</strong> {{ sistemaStatus?.database }}</p>
    <p><strong>Ambiente:</strong> {{ sistemaStatus?.environment }}</p>
    <button (click)="fecharStatus()">Fechar</button>
  </div>
  <div *ngIf="mostrarVersao" class="status-box">
    <h3>VersÃ£o do Sistema</h3>
    <p><strong>Projeto:</strong> {{ sistemaVersao?.project }}</p>
    <p><strong>VersÃ£o:</strong> {{ sistemaVersao?.version }}</p>
    <p><strong>Autor:</strong> {{ sistemaVersao?.author }}</p>
    <p><strong>Ãšltima AtualizaÃ§Ã£o:</strong> {{ sistemaVersao?.lastUpdate }}</p>
    <button (click)="fecharVersao()">Fechar</button>
  </div>
  
  <!-- ğŸ” Filtro de caixa por data -->
  <section class="caixa-section">
    <h3>ğŸ“… Consultar Caixa por Data</h3>

    <input type="date" [(ngModel)]="filtroData">
    <button (click)="buscarCaixaPorData()">Buscar</button>

    <div *ngIf="valorCaixa !== null">
      <p><strong>Total:</strong> ${{ valorCaixa.toFixed(2) }}</p>
    </div>
  </section>

  <!-- ğŸ§¾ FormulÃ¡rio para adicionar novo veÃ­culo -->
  <div *ngIf="exibirFormulario" class="formulario-container">
    <h3>Novo VeÃ­culo</h3>
    <form (ngSubmit)="registrarEntrada()" #formulario="ngForm">
      <input type="text" [(ngModel)]="novoVeiculo.plate" name="plate" placeholder="Placa" required />
      <input type="text" [(ngModel)]="novoVeiculo.model" name="model" placeholder="Modelo" required />
      <input type="text" [(ngModel)]="novoVeiculo.color" name="color" placeholder="Cor" required />
      <input type="text" [(ngModel)]="novoVeiculo.ownerName" name="ownerName" placeholder="ProprietÃ¡rio" required />

      <div class="form-buttons">
        <button type="submit">Registrar</button>
        <button type="button" (click)="fecharFormulario()">Cancelar</button>
      </div>
    </form>
  </div>

  <!-- Tabela com veÃ­culos ativos -->
  <table>
    <thead>
      <tr>
        <th>Placa</th>
        <th>Modelo</th>
        <th>Cor</th>
        <th>ProprietÃ¡rio</th>
        <th>Entrada</th>
        <th>AÃ§Ãµes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let v of vehicles">
        <td>{{ v.plate }}</td>
        <td>{{ v.model }}</td>
        <td>{{ v.color }}</td>
        <td>{{ v.ownerName }}</td>
        <td>{{ v.entryTime | date:'short' }}</td>
        <td>
          <button (click)="registrarSaida(v.id)">Registrar SaÃ­da</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
